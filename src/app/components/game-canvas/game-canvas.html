<div class="safe-area-top safe-area-bottom flex h-screen flex-col bg-gray-900">
  <!-- Mobile Game HUD -->
  <div
    class="flex shrink-0 items-center justify-between bg-gray-800 px-4 py-3 text-white"
  >
    <!-- Game Stats - Compact Layout -->
    <div class="flex gap-4">
      <div class="text-center">
        <div class="text-lg font-bold">{{ gameState.score() }}</div>
        <div class="text-xs opacity-75">Score</div>
      </div>
      <div class="text-center">
        <div class="text-lg font-bold">{{ gameState.currentLength() }}</div>
        <div class="text-xs opacity-75">Length</div>
      </div>
      <div class="text-center">
        <div class="text-lg font-bold">
          {{ formatTime(gameState.gameTime()) }}
        </div>
        <div class="text-xs opacity-75">Time</div>
      </div>
    </div>

    <!-- Mobile-Optimized Controls -->
    <div class="flex gap-3">
      <button
        (click)="togglePause()"
        class="flex h-12 w-12 items-center justify-center rounded-full bg-blue-600 text-xl font-semibold transition-all duration-200 hover:scale-105 hover:bg-blue-700 active:scale-95"
      >
        {{ gameState.gameStatus() === "paused" ? "‚ñ∂Ô∏è" : "‚è∏Ô∏è" }}
      </button>
      <button
        (click)="goBack()"
        class="flex h-12 w-12 items-center justify-center rounded-full bg-red-600 text-xl transition-all duration-200 hover:scale-105 hover:bg-red-700 active:scale-95"
      >
        üè†
      </button>
    </div>
  </div>

  <!-- Mobile Game Canvas Container -->
  <div
    class="flex flex-1 flex-col items-center justify-center px-4 py-2"
    #containerElement
  >
    <div class="relative touch-none" #gestureContainer>
      <canvas
        #gameCanvas
        class="pointer-events-none rounded-2xl border-4 border-white bg-green-100 shadow-2xl"
        [width]="gameState.canvasWidth()"
        [height]="gameState.canvasHeight()"
      >
      </canvas>

      <!-- Mobile Game Status Overlay -->
      @if (gameState.gameStatus() !== "playing") {
        <div
          class="absolute inset-0 flex items-center justify-center rounded-2xl bg-black/60"
        >
          <div
            class="mx-4 w-full max-w-sm rounded-2xl bg-white p-6 text-center shadow-2xl"
          >
            @switch (gameState.gameStatus()) {
              @case ("menu") {
                <h2 class="mb-6 text-3xl font-bold">üêç Ready to Play?</h2>
                <button
                  (click)="startGame()"
                  class="w-full rounded-xl bg-green-600 py-4 text-lg font-semibold text-white transition-all duration-200 hover:scale-105 hover:bg-green-700 active:scale-95"
                >
                  Start Game
                </button>
              }
              @case ("paused") {
                <h2 class="mb-6 text-3xl font-bold">‚è∏Ô∏è Game Paused</h2>
                <button
                  (click)="togglePause()"
                  class="w-full rounded-xl bg-blue-600 py-4 text-lg font-semibold text-white transition-all duration-200 hover:scale-105 hover:bg-blue-700 active:scale-95"
                >
                  Resume Game
                </button>
              }
              @case ("gameOver") {
                <h2 class="mb-4 text-3xl font-bold">üéÆ Game Over!</h2>
                <div class="mb-6 space-y-3 text-lg">
                  <div class="flex justify-between">
                    <span>Final Score:</span>
                    <strong>{{ gameState.score() }}</strong>
                  </div>
                  <div class="flex justify-between">
                    <span>Final Length:</span>
                    <strong>{{ gameState.currentLength() }}</strong>
                  </div>
                  <div class="flex justify-between text-yellow-600">
                    <span>Coins Earned:</span>
                    <strong>+{{ coinsEarned() }} ü™ô</strong>
                  </div>
                </div>
                <div class="space-y-3">
                  <button
                    (click)="startGame()"
                    class="w-full rounded-xl bg-green-600 py-4 text-lg font-semibold text-white transition-all duration-200 hover:scale-105 hover:bg-green-700 active:scale-95"
                  >
                    Play Again
                  </button>
                  <button
                    (click)="goBack()"
                    class="w-full rounded-xl bg-gray-600 py-3 text-base font-semibold text-white transition-all duration-200 hover:scale-105 hover:bg-gray-700 active:scale-95"
                  >
                    Back to Menu
                  </button>
                </div>
              }
            }
          </div>
        </div>
      }
    </div>

    <!-- Mobile Swipe Instructions -->
    @if (gameState.gameStatus() === "menu") {
      <div class="mt-4 text-center text-white/80">
        <p class="text-sm">Swipe to control your noodle!</p>
        <div class="mt-2 flex justify-center gap-4 text-xs">
          <span>‚¨ÜÔ∏è Up</span>
          <span>‚¨áÔ∏è Down</span>
          <span>‚¨ÖÔ∏è Left</span>
          <span>‚û°Ô∏è Right</span>
        </div>
      </div>
    }
  </div>
</div>
